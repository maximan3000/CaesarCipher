# Решаемая задача

Создать программу шифрования – дешифрования методом Цезаря с ключевым словом для английского языка. 
Создать программу взлома методом, использующим анализ частоты появления букв.


## Алгоритм шифрования Цезаря

Система шифрования Цезаря с ключевым словом является одноалфавитной системой подстановки. Особенностью этой системы является использование ключевого слова для смещения и изменения порядка символов в алфавите подстановки. Выберем некоторое число k, 0 < k < 25, и слово или короткую фразу в качестве ключевого слова. Желательно, чтобы все буквы ключевого слова были различными. Пусть выбраны слово DIPLOMAT в качестве ключевого слова и число k = 5. Ключевое слово записывается под буквами алфавита, начиная с буквы, числовой код которой совпадает с выбранным числом k:


![alt text](https://github.com/maximan3000/EncryptionCesarWithKey/blob/master/README-img/image1.png?raw=true)


Оставшиеся буквы алфавита подстановки записываются после ключевого слова в алфавитном порядке:

![alt text](https://github.com/maximan3000/EncryptionCesarWithKey/blob/master/README-img/image1.png?raw=true)


Теперь мы имеем подстановку для каждой буквы произвольного сообщения. Исходное сообщение SEND MORE MONEY, шифруется как HZBY TCGZ TCBZS. Следует отметить, что требование о различии всех букв ключевого слова не обязательно. Можно просто записать ключевое слово (или фразу) без повторения одинаковых букв. Например, ключевая фраза КАК ДЫМ ОТЕЧЕСТВА НАМ СЛАДОК И ПРИЯТЕН и число k = 3 порождают следующую таблицу подстановок:

![alt text](https://github.com/maximan3000/EncryptionCesarWithKey/blob/master/README-img/image1.png?raw=true)


Несомненным достоинством системы Цезаря с ключевым словом является то, что количество возможных ключевых слов практически неисчерпаемо. Недостатком этой системы является возможность взлома шифрованного текста на основе анализа частот появления букв.


## Алгоритм реализации шифрования

Данный алгоритм шифрования реализован на стеке java/maven/junit через Intellij Idea.
Шифрование и дешифрация производится по таблице – мапе, в которой каждый ключ и значение – шифруемый или дешифруемый символ. Чтобы закодировать или декодировать текст – берется каждый символ этого текста и, если его ключ есть в данной таблице, то он заменяется на соответствующее значение по этому ключу.
Соответственно, для шифрования используется одна таблица, а для дешифрации – обратная, в которой каждый ключ и его значение меняются местами.
Чтобы создать данную таблицу, берется список букв английского языка, расположенных в алфавитном порядке. И далее создается новый список, в котором:

 * На месте букв с индексом от index=offset располагается слово keyword, из которого убраны повторяющиеся и неиспользуемые (при кодировании) буквы;
 * После ключевого слова располагаются символы алфавита по возрастанию циклически (когда достигнут конец происходит переход к началу).

Затем создается таблица дешифрации, в которой i-му элементу данного списка соответствует i-й элемент списка букв в алфавитном порядке.


## Алгоритм реализации взлома

Для совершения взлома необходимо создать таблицу шифрования без использования ключевого слова и смещения.

Для этого используется 2 метода:
 * Частотный анализ;
 * Словарь.

При частотном анализе берется список букв алфавита, упорядоченный по частоте их употребления. В данном случае, он брался из википедии [https://ru.wikipedia.org/wiki/Английский_алфавит]. Далее для зашифрованного текста составляется такой же список букв, предположительно используемых при шифровании, отсортированных по частоте появления. И далее создается таблица дешифрации (мапа), в которой i-му элементу из эталонного (первого) списка соответствует i-й элемент найденного списка (второго).

При использовании словаря – создается уникальный словарь на основе большой книги (в данном случае, перевод книги «Война и Мир»). Далее в зашифрованном тексте для каждого слова (считается, что пробелы не зашифрованы) происходит следующее:

1.	Слово декодируется по таблице, созданной частотным анализом;

2.	В словаре ищется слово, наиболее близкое к данному (максимум одинаковых букв на одинаковых позициях) с длинной слова, не меньшей чем L (по умолчанию - 8). 
Если в данном слове отличается N букв (по умолчанию - 1) и данные отличающиеся буквы близки по частоте (разность индексов в списке частот букв английского языка; по умолчанию - 5), то словарь дешифрации правится на букву, на которую отличаются два данных слова (декодированное и из словаря). 
При правке старый ключ, указывавший ранее на отличающуюся букву (1) в декодированном слове, теперь указывает на отличающуюся букву (2) в слове из словаря, а ключ, который ранее указывал на (2) теперь указывает на (1);

3.	Далее предлагается вручную править словарь для дешифрации – указывается в консоли, какую букву на какую нужно заменить (таблица меняется как в пункте 2). При этом, дешифрация текста обновляется.

## Рекомендации по дальнейшему усовершенствованию

Для шифрования:
1.	Использовать повторное шифрование (дважды и более раз зашифровывать и расшифровывать текст);
2.	Зашифровывать также и другие символы помимо букв;
3.	Использовать разные таблицы шифрования для разных участков текста.

Для взлома:
1.	Можно учитывать то, что кодируются не символы;
2.	Можно составлять таблицы дешифрации для каждого блока текста, что позволит иногда обойти пункт 3 рекомендации для шифрования;
3.	Производить коррекцию таблицы дешифрации0 текста методами словаря несколько раз.
